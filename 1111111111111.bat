@echo off
echo ========================================
echo    تشغيل تطبيق سكني - النسخة السريعة
echo ========================================

REM فحص إذا كان السيرفر يعمل على المنفذ 5173
netstat -an | find "5173" >nul 2>&1
if %errorlevel%==0 (
    echo السيرفر يعمل بالفعل على المنفذ 5173
    echo سيتم تشغيل نسخة إضافية على المنفذ 5174 لتجنب التداخل...
    npm run dev -- --port 5174
    goto :end
)

REM فحص إذا كان السيرفر يعمل على المنفذ 3000
netstat -an | find "3000" >nul 2>&1
if %errorlevel%==0 (
    echo السيرفر يعمل بالفعل على المنفذ 3000
    echo سيتم تشغيل نسخة إضافية على المنفذ 3001 لتجنب التداخل...
    npm run dev -- --port 3001
    goto :end
)

echo بدء تشغيل السيرفر على المنفذ الافتراضي...
echo.

REM تشغيل npm run dev
npm run dev

:end
echo.
echo تم الانتهاء من العملية.
pause