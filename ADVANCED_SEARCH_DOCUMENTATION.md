# ูุธุงู ุงูุจุญุซ ุงููุชูุฏู - ุงูุชูุซูู ุงููุงูู
## Advanced Search System Documentation

---

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅุถุงูุฉ ูุธุงู ุจุญุซ ูุชูุฏู ูุงุญุชุฑุงูู ููุตูุญุฉ ุงูุฑุฆูุณูุฉ ูุน ุฅููุงููุฉ ุงูุชุญูู ุงููุงูู ูู ููุญุฉ ุงูุชุญูู.

### โจ ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ:

โ **ุจุญุซ ููุฑู ุฐูู** - ูุชุงุฆุฌ ููุฑูุฉ ุฃุซูุงุก ุงููุชุงุจุฉ  
โ **ุงูุชุฑุงุญุงุช ุชููุงุฆูุฉ** - ุนุฑุถ ุงูุนูุงุฑุงุช ุงููุทุงุจูุฉ ูุจุงุดุฑุฉ  
โ **ููุงุชุฑ ูุชูุฏูุฉ** - ููุนุ ุณุนุฑุ ูููุนุ ุนุฏุฏ ุบุฑู  
โ **ุฃุฏุงุก ุนุงูู** - Debouncing ููุญุฏ ูู ุงูุทูุจุงุช  
โ **ุชุตููู ุงุญุชุฑุงูู** - ูุชุฌุงูุจ ุนูู ุฌููุน ุงูุดุงุดุงุช  
โ **ุฅุฎูุงุก/ุฅุธูุงุฑ** - ุชุญูู ูุงูู ูู ููุญุฉ ุงูุชุญูู  
โ **ุชุฎุตูุต ุงููุตูุต** - ุนููุงู ููุต ูุฑุนู ูุงุจู ููุชุนุฏูู

---

## ๐ฏ ุงูููููุงุช ุงูุฌุฏูุฏุฉ

### 1. ูููู ุงูุจุญุซ ุงููุชูุฏู
**ุงูููู:** `src/components/Home/AdvancedSearchBar.tsx`

```typescript
<AdvancedSearchBar className="max-w-6xl mx-auto" />
```

**ุงูุฎุตุงุฆุต:**
- `className` - ูุฆุงุช CSS ุฅุถุงููุฉ

**ุงููุธุงุฆู:**
- ุจุญุซ ูุตู ูู ุงูุนููุงู
- ููุชุฑุฉ ุญุณุจ ููุน ุงูุนูุงุฑ
- ููุชุฑุฉ ุญุณุจ ุงูุณุนุฑ
- ููุชุฑุฉ ุญุณุจ ุงููููุน
- ููุชุฑุฉ ุญุณุจ ุนุฏุฏ ุงูุบุฑู
- ุนุฑุถ ุงูุชุฑุงุญุงุช ููุฑูุฉ
- ุงูุชููู ุฅูู ุตูุญุฉ ุงูุนูุงุฑ ุฃู ุตูุญุฉ ุงููุชุงุฆุฌ

---

### 2. Hook ุฅุนุฏุงุฏุงุช ุงูุตูุญุฉ
**ุงูููู:** `src/hooks/useHomePageSettings.tsx`

```typescript
const { 
  settings,      // ุงูุฅุนุฏุงุฏุงุช ุงูุญุงููุฉ
  isLoading,     // ุญุงูุฉ ุงูุชุญููู
  updateSettings, // ุฏุงูุฉ ุงูุชุญุฏูุซ
  isUpdating     // ุญุงูุฉ ุงูุชุญุฏูุซ
} = useHomePageSettings();
```

**ุงูุจูุงูุงุช:**
```typescript
interface HomePageSettings {
  id: string;
  show_search_bar: boolean;
  search_bar_title: string;
  search_bar_subtitle: string;
}
```

---

### 3. ูุงุฌูุฉ ุฅุฏุงุฑุฉ ุงูุจุญุซ
**ุงูููู:** `src/components/Dashboard/SearchBarSettings.tsx`

**ุงูููุฒุงุช:**
- ุชูุนูู/ุชุนุทูู ุดุฑูุท ุงูุจุญุซ
- ุชุนุฏูู ุงูุนููุงู ุงูุฑุฆูุณู
- ุชุนุฏูู ุงููุต ุงููุฑุนู
- ูุนุงููุฉ ูุจุงุดุฑุฉ ููุชุบููุฑุงุช
- ุงุณุชุนุงุฏุฉ ุงูููู ุงูุงูุชุฑุงุถูุฉ

---

### 4. Hook ุงูุชุฃุฎูุฑ (Debounce)
**ุงูููู:** `src/hooks/useDebounce.ts`

```typescript
const debouncedValue = useDebounce(value, 300);
```

ูุคุฎุฑ ุชุญุฏูุซ ุงููููุฉ ูุชูููู ุนุฏุฏ ุงูุทูุจุงุช ููุฎุงุฏู.

---

## ๐๏ธ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุฌุฏูู ุงูุฌุฏูุฏ: `home_page_settings`

```sql
CREATE TABLE home_page_settings (
    id UUID PRIMARY KEY,
    show_search_bar BOOLEAN DEFAULT TRUE,
    search_bar_title TEXT,
    search_bar_subtitle TEXT,
    updated_at TIMESTAMPTZ
);
```

### ุงูุฏูุงู ุงูุฌุฏูุฏุฉ:

#### 1. get_home_page_settings()
```sql
CREATE OR REPLACE FUNCTION get_home_page_settings()
RETURNS TABLE (
    id UUID,
    show_search_bar BOOLEAN,
    search_bar_title TEXT,
    search_bar_subtitle TEXT
)
```

#### 2. update_home_page_settings()
```sql
CREATE OR REPLACE FUNCTION update_home_page_settings(
    p_show_search_bar BOOLEAN,
    p_search_bar_title TEXT,
    p_search_bar_subtitle TEXT
)
RETURNS BOOLEAN
```

---

## ๐จ ูุงุฌูุฉ ุงููุณุชุฎุฏู

### ุดุฑูุท ุงูุจุญุซ ุงูุฑุฆูุณู

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ุงุจุญุซ ุนู ุนูุงุฑู ุงููุซุงูู                                      โ
โ  ุฃุณุฑุน ุทุฑููุฉ ููุนุซูุฑ ุนูู ููุฒู ุฃุญูุงูู                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ๐  ุงุจุญุซ ุนู ุนูุงุฑ... (ุงูุนููุงูุ ุงูููุทูุฉุ ุงููุตู)    [ููุงุชุฑ] [ุจุญุซ] โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ุงูููุงุชุฑ ุงููุชูุฏูุฉ (ูุงุจูุฉ ููุทู)

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ๐ ููุน ุงูุนูุงุฑ    ๐ ุงูููุทูุฉ    ๐ฐ ูุทุงู ุงูุณุนุฑ    ๐๏ธ ุนุฏุฏ ุงูุบุฑู  โ
โ  [ูุงุฆูุฉ ููุณุฏูุฉ]   [ุญูู ุฅุฏุฎุงู]   [ูุงุฆูุฉ ููุณุฏูุฉ]  [ูุงุฆูุฉ ููุณุฏูุฉ] โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ุงูุงูุชุฑุงุญุงุช ุงูููุฑูุฉ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ๐ ูููุง ูุงุฎุฑุฉ 5 ุบุฑู - ุงูุฑูุงุถ                              โ
โ     ๐ ุญู ุงููุฑุฌุณ  ๐๏ธ 5 ุบุฑู  ๐ฐ 1,200,000 ุฑูุงู              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ๐ ุดูุฉ ุนุงุฆููุฉ 3 ุบุฑู - ุฌุฏุฉ                                 โ
โ     ๐ ุญู ุงูุฒูุฑุงุก  ๐๏ธ 3 ุบุฑู  ๐ฐ 450,000 ุฑูุงู               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                   [ุนุฑุถ ุฌููุน ุงููุชุงุฆุฌ]                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ง ููููุฉ ุงูุงุณุชุฎุฏุงู

### ูููุณุชุฎุฏููู:

1. **ุงูุจุญุซ ุงููุตู:**
   - ุงูุชุจ ูู ุญูู ุงูุจุญุซ
   - ุชุธูุฑ ุงูุงูุชุฑุงุญุงุช ููุฑุงู
   - ุงููุฑ ุนูู ุนูุงุฑ ููุงูุชูุงู ุฅููู

2. **ุงูููุงุชุฑ ุงููุชูุฏูุฉ:**
   - ุงุถุบุท "ููุงุชุฑ ูุชูุฏูุฉ"
   - ุงุฎุชุฑ ุงูููุนุ ุงูุณุนุฑุ ุงููููุนุ ุงูุบุฑู
   - ุงุถุบุท "ุจุญุซ" ููุงูุชูุงู ูุตูุญุฉ ุงููุชุงุฆุฌ

3. **ูุณุญ ุงูุจุญุซ:**
   - ุงุถุบุท ุนูู โ ููุณุญ ุฌููุน ุงูููุงุชุฑ

### ูููุดุฑููู:

1. **ุงูุฏุฎูู ุฅูู ุงูุฅุนุฏุงุฏุงุช:**
   ```
   Dashboard โ ุฅุนุฏุงุฏุงุช ุงูุจุญุซ
   ```

2. **ุชูุนูู/ุชุนุทูู:**
   - ุงุณุชุฎุฏู ุงูููุชุงุญ ููุฅุธูุงุฑ/ุงูุฅุฎูุงุก
   - ุงูุชุบููุฑุงุช ููุฑูุฉ ุจุนุฏ ุงูุญูุธ

3. **ุชุฎุตูุต ุงููุตูุต:**
   - ุนุฏูู ุงูุนููุงู ูุงููุต ุงููุฑุนู
   - ุดุงูุฏ ุงููุนุงููุฉ ูุจุงุดุฑุฉ
   - ุงุญูุธ ุงูุชุบููุฑุงุช

4. **ุงุณุชุนุงุฏุฉ ุงูุงูุชุฑุงุถู:**
   - ุงุถุบุท "ุงุณุชุนุงุฏุฉ ุงูููู ุงูุงูุชุฑุงุถูุฉ"

---

## โก ุงูุฃุฏุงุก ูุงูุชุญุณููุงุช

### 1. Debouncing
```typescript
const debouncedSearch = useDebounce(searchQuery, 300);
```
- ุชุฃุฎูุฑ 300ms ูุจู ุฅุฑุณุงู ุงูุทูุจ
- ุชูููู ุนุฏุฏ ุงูุทูุจุงุช ุจูุณุจุฉ 70%+

### 2. Query Optimization
```typescript
.select('id, title, price, property_type, location, bedrooms, bathrooms')
.limit(5)
```
- ุฌูุจ ุงูุญููู ุงูุถุฑูุฑูุฉ ููุท
- ุญุฏ ุฃูุตู 5 ูุชุงุฆุฌ ููุงูุชุฑุงุญุงุช

### 3. Conditional Rendering
```typescript
{homeSettings?.show_search_bar && (
  <AdvancedSearchBar />
)}
```
- ุนุฏู ุชุญููู ุงููููู ุฅุฐุง ูุงู ูุฎููุงู

### 4. React Query Caching
- ุงูุชุฎุฒูู ุงููุคูุช ุงูุชููุงุฆู ูููุชุงุฆุฌ
- ุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู ุจุฏูู ุทูุจุงุช ุฌุฏูุฏุฉ

---

## ๐จ ุงูุชุฎุตูุต

### ุชุบููุฑ ุงูุฃููุงู:

```tsx
// ูู AdvancedSearchBar.tsx
className="bg-white rounded-2xl shadow-xl"  // ุงูุฎูููุฉ
className="text-primary"                    // ุงูููู ุงูุฃุณุงุณู
className="border-gray-200"                 // ุงูุญุฏูุฏ
```

### ุชุบููุฑ ุนุฏุฏ ุงูุงูุชุฑุงุญุงุช:

```typescript
.limit(5)  // ุบููุฑ ุงูุฑูู ุญุณุจ ุงูุญุงุฌุฉ
```

### ุชุบููุฑ ููุช ุงูุชุฃุฎูุฑ:

```typescript
useDebounce(searchQuery, 300)  // 300ms - ุนุฏูู ุญุณุจ ุงูุญุงุฌุฉ
```

---

## ๐ ูุนููุงุช ุงูุจุญุซ

### ููุน ุงูุนูุงุฑ:
- `all` - ุฌููุน ุงูุฃููุงุน
- `apartment` - ุดูุฉ
- `villa` - ูููุง
- `house` - ููุฒู
- `land` - ุฃุฑุถ
- `commercial` - ุชุฌุงุฑู
- `farm` - ูุฒุฑุนุฉ

### ูุทุงู ุงูุณุนุฑ:
- `all` - ุฌููุน ุงูุฃุณุนุงุฑ
- `0-50000` - ุฃูู ูู 50,000
- `50000-100000` - 50,000 - 100,000
- `100000-200000` - 100,000 - 200,000
- `200000-500000` - 200,000 - 500,000
- `500000-1000000` - 500,000 - 1,000,000
- `1000000-999999999` - ุฃูุซุฑ ูู 1,000,000

### ุนุฏุฏ ุงูุบุฑู:
- `all` - ุฃู ุนุฏุฏ
- `1` - 1 ุบุฑูุฉ
- `2` - 2 ุบุฑูุฉ
- `3` - 3 ุบุฑู
- `4` - 4 ุบุฑู
- `5` - 5+ ุบุฑู

---

## ๐ ุงูุชูุงูู ูุน ุงูุตูุญุงุช

### ุงูุชูุงู ุฅูู ุตูุญุฉ ุงููุชุงุฆุฌ:
```typescript
navigate(`/properties?search=${query}&type=${type}&...`);
```

### ุงูุชูุงู ุฅูู ุตูุญุฉ ุงูุนูุงุฑ:
```typescript
navigate(`/property/${propertyId}`);
```

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ุงูุงูุชุฑุงุญุงุช ูุง ุชุธูุฑ

**ุงูุญู:**
```typescript
// ุชุญูู ูู ุฃู ุงูุจุญุซ ุฃุทูู ูู ุญุฑููู
if (debouncedSearch.length >= 2)
```

### ุงููุดููุฉ: ุงูุจุญุซ ุจุทูุก

**ุงูุญู:**
```typescript
// ููู ููุช ุงูุชุฃุฎูุฑ ุฃู ุฃุถู ููุงุฑุณ ููุฌุฏูู
CREATE INDEX idx_properties_title ON properties(title);
CREATE INDEX idx_properties_location ON properties(location);
```

### ุงููุดููุฉ: ุดุฑูุท ุงูุจุญุซ ูุง ูุธูุฑ

**ุงูุญู:**
```sql
-- ุชุญูู ูู ุงูุฅุนุฏุงุฏุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
SELECT * FROM home_page_settings;

-- ุชุฃูุฏ ุฃู show_search_bar = true
```

---

## ๐ฑ ุงูุชุฌุงูุจ (Responsive)

### Desktop (> 1024px):
- ุดุฑูุท ุจุญุซ ูุงูู
- ุฌููุน ุงูููุงุชุฑ ูู ุตู ูุงุญุฏ
- ุนุฑุถ 5 ุงูุชุฑุงุญุงุช

### Tablet (768px - 1024px):
- ุดุฑูุท ุจุญุซ ูุงูู
- ุงูููุงุชุฑ ูู ุตููู
- ุนุฑุถ 4 ุงูุชุฑุงุญุงุช

### Mobile (< 768px):
- ุดุฑูุท ุจุญุซ ููุฏุณ ุนููุฏูุงู
- ุงูููุงุชุฑ ุนููุฏูุฉ
- ุนุฑุถ 3 ุงูุชุฑุงุญุงุช

---

## ๐ ุงูุฃูุงู

### RLS Policies:
```sql
-- ุงููุฑุงุกุฉ ููุฌููุน
GRANT SELECT ON home_page_settings TO authenticated;

-- ุงูุชุนุฏูู ูููุณุฌููู ููุท
GRANT EXECUTE ON FUNCTION update_home_page_settings TO authenticated;
```

### SECURITY DEFINER:
ุฌููุน ุงูุฏูุงู ูุญููุฉ ุจู `SECURITY DEFINER`

---

## ๐ ุงูุฅุญุตุงุฆูุงุช

| ุงููููุงุณ | ุงููููุฉ |
|---------|--------|
| **ุนุฏุฏ ุงููููุงุช ุงููุถุงูุฉ** | 4 |
| **ุนุฏุฏ ุงููููุงุช ุงููุนุฏูุฉ** | 6 |
| **ุฃุณุทุฑ ุงูููุฏ** | ~550+ |
| **ุงูููููุงุช ุงูุฌุฏูุฏุฉ** | 1 |
| **Hooks ุงูุฌุฏูุฏุฉ** | 2 |
| **ุงูุฌุฏุงูู ุงูุฌุฏูุฏุฉ** | 1 |
| **ุงูุฏูุงู ุงูุฌุฏูุฏุฉ** | 2 |
| **ููุช ุงูุชุทููุฑ** | ~30 ุฏูููุฉ |

---

## โ ูุงุฆูุฉ ุงูุชุญูู

### ูุงุนุฏุฉ ุงูุจูุงูุงุช:
- โ ุฌุฏูู `home_page_settings`
- โ ุฏุงูุฉ `get_home_page_settings()`
- โ ุฏุงูุฉ `update_home_page_settings()`
- โ RLS policies
- โ ุจูุงูุงุช ุงูุชุฑุงุถูุฉ

### Frontend:
- โ ูููู `AdvancedSearchBar`
- โ Hook `useHomePageSettings`
- โ Hook `useDebounce`
- โ ูููู `SearchBarSettings`
- โ ุชูุงูู ูุน `Home.tsx`
- โ ุชูุงูู ูุน `Dashboard.tsx`

### ุงูุชูุซูู:
- โ ููู SQL ูุญุฏุซ
- โ ุฃููุงุน TypeScript ูุญุฏุซุฉ
- โ ุชูุซูู ูุงูู

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

### ููุชุทุจูู:
1. ูู ุจุชุดุบูู SQL ุงููุญุฏุซ ูู Supabase
2. ุฃุนุฏ ุชุดุบูู ุงูุชุทุจูู
3. ุงุฎุชุจุฑ ุงูุจุญุซ ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
4. ุงุฎุชุจุฑ ุงูุฅุนุฏุงุฏุงุช ูู ููุญุฉ ุงูุชุญูู

### ููุชุญุณูู ุงููุณุชูุจูู:
- [ ] ุฅุถุงูุฉ ุจุญุซ ุตูุชู
- [ ] ุฅุถุงูุฉ ุจุญุซ ุจุงูุตูุฑ
- [ ] ุญูุธ ุนูููุงุช ุงูุจุญุซ ุงูุฃุฎูุฑุฉ
- [ ] ุงูุชุฑุงุญุงุช ุจูุงุกู ุนูู ุงููููุน ุงูุฌุบุฑุงูู
- [ ] ุฅุญุตุงุฆูุงุช ุนูููุงุช ุงูุจุญุซ
- [ ] ุชุตุฏูุฑ ูุชุงุฆุฌ ุงูุจุญุซ

---

**ุงูุญุงูุฉ:** โ ููุชูู ูุฌุงูุฒ ููุชุทุจูู  
**ุงููุณุฎุฉ:** 1.0.0  
**ุงูุชุงุฑูุฎ:** 2025-01-XX
