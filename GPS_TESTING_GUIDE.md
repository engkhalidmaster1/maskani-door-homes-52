# 🧪 دليل الاختبار السريع - نظام GPS

## ✅ الاختبارات الأساسية

### 1️⃣ اختبار صفحة الخريطة

**الخطوات:**
```bash
1. افتح المتصفح
2. اذهب إلى: http://localhost:8082/map
3. سيظهر popup من المتصفح يطلب الإذن
4. اضغط "السماح" أو "Allow"
```

**النتيجة المتوقعة:**
```
✅ رسالة: "تم تحديد موقعك بنجاح"
✅ رسالة: "دقة الموقع: X متر"
✅ الخريطة تتمركز على موقعك الحقيقي
✅ يظهر دائرة حول موقعك (نطاق 25 كم)
```

**في Console (F12):**
```javascript
✓ تم تحديد موقعك بدقة 15 متر
```

---

### 2️⃣ اختبار منتقي الموقع (إضافة عقار)

**الخطوات:**
```bash
1. اذهب إلى: http://localhost:8082/add-property
2. انزل إلى قسم "تحديد موقع العقار على الخريطة"
3. اضغط الزر الأخضر: "استخدم موقعي الحالي (GPS)"
4. اضغط "السماح" عند طلب الإذن
```

**النتيجة المتوقعة:**
```
✅ الزر يتغير إلى "جاري تحديد موقعك..."
✅ رسالة toast: "تم تحديد موقعك"
✅ رسالة: "دقة GPS: X متر"
✅ علامة حمراء تظهر على موقعك الدقيق
✅ مربع أخضر يظهر الإحداثيات والعنوان
```

**في Console (F12):**
```javascript
✓ GPS موقعك: 34.123456, 43.789012
✓ دقة الموقع: 12 متر
```

---

### 3️⃣ اختبار دقة GPS

**الخطوات:**
```bash
1. افتح أي صفحة بها خريطة
2. افتح Console (F12)
3. استخدم زر GPS
4. راقب الرسائل في Console
```

**تحليل الدقة:**
```
دقة ممتازة: 0-20 متر ✅
دقة جيدة: 20-50 متر ✅
دقة مقبولة: 50-100 متر ⚠️
دقة ضعيفة: أكثر من 100 متر ❌
```

**إذا كانت الدقة ضعيفة:**
- اخرج إلى مكان مفتوح
- تأكد من تفعيل GPS في الجهاز
- انتظر 30 ثانية وحاول مرة أخرى

---

## 🐛 اختبار حالات الخطأ

### ❌ اختبار رفض الإذن

**الخطوات:**
```bash
1. افتح صفحة الخريطة
2. عند طلب الإذن، اضغط "Block" أو "رفض"
```

**النتيجة المتوقعة:**
```
❌ رسالة خطأ: "يرجى السماح للتطبيق بالوصول إلى موقعك"
❌ رسالة toast حمراء
❌ الخريطة تظل على الموقع الافتراضي
```

---

### ❌ اختبار انتهاء المهلة

**الخطوات:**
```bash
1. ادخل إلى مكان مغلق تماماً (بدون نوافذ)
2. افتح صفحة الخريطة
3. اضغط "السماح"
4. انتظر 10-15 ثانية
```

**النتيجة المتوقعة:**
```
❌ رسالة: "انتهت مهلة طلب الموقع"
❌ رسالة toast حمراء
```

---

### ❌ اختبار GPS معطل

**الخطوات:**
```bash
1. عطّل GPS من إعدادات الجهاز
2. افتح صفحة الخريطة
3. اضغط "السماح"
```

**النتيجة المتوقعة:**
```
❌ رسالة: "معلومات الموقع غير متوفرة"
❌ رسالة: "تأكد من تفعيل GPS"
```

---

## 📊 جدول الاختبار

| رقم | الاختبار | الحالة | الملاحظات |
|-----|----------|--------|-----------|
| 1 | فتح /map | ⬜ | هل طلب الإذن؟ |
| 2 | السماح بالإذن | ⬜ | هل ظهر الموقع؟ |
| 3 | دقة أقل من 50م | ⬜ | راجع Console |
| 4 | إضافة عقار | ⬜ | زر GPS يعمل؟ |
| 5 | علامة على الخريطة | ⬜ | هل ظهرت؟ |
| 6 | رفض الإذن | ⬜ | رسالة خطأ؟ |
| 7 | GPS معطل | ⬜ | رسالة مناسبة؟ |

---

## 🔍 نقاط التحقق

### ✅ واجهة المستخدم:
- [ ] الأزرار تظهر بشكل صحيح
- [ ] النصوص باللغة العربية
- [ ] الرسائل واضحة ومفهومة
- [ ] مؤشر التحميل يظهر أثناء الانتظار

### ✅ الوظائف:
- [ ] GPS يعمل في الأماكن المفتوحة
- [ ] الدقة أقل من 50 متر
- [ ] رسائل الخطأ تظهر بشكل صحيح
- [ ] يمكن إعادة المحاولة بعد الفشل

### ✅ الأداء:
- [ ] الاستجابة سريعة (أقل من 10 ثواني)
- [ ] لا توجد أخطاء في Console
- [ ] لا يتجمد التطبيق
- [ ] يمكن استخدام الخريطة أثناء التحميل

---

## 💡 نصائح الاختبار

### للحصول على أفضل النتائج:

1. **الموقع:**
   - اختبر في مكان مفتوح أولاً
   - ثم اختبر داخل المباني
   - قارن الدقة في الحالتين

2. **الوقت:**
   - انتظر 5-10 ثواني بعد الضغط على "السماح"
   - GPS يحتاج وقتاً للاتصال بالأقمار الصناعية
   - الدقة تتحسن مع الوقت

3. **الأجهزة:**
   - اختبر على الهاتف (GPS مدمج)
   - اختبر على الحاسوب المحمول (GPS عبر WiFi)
   - قارن الدقة

4. **المتصفحات:**
   - Chrome/Edge (الأفضل)
   - Firefox (جيد)
   - Safari (جيد على iOS)

---

## 📱 اختبار على الهاتف

### الخطوات:
```bash
1. افتح المتصفح على الهاتف
2. اذهب إلى: http://[your-ip]:8082/map
3. اضغط "السماح" عند طلب الموقع
4. تحقق من دقة GPS (يجب أن تكون 5-20 متر)
```

### المتوقع:
- ✅ دقة أعلى من الحاسوب
- ✅ استجابة أسرع
- ✅ موقع أدق (GPS مدمج)

---

## 🎯 معايير النجاح

الاختبار ناجح إذا:
1. ✅ GPS يعمل في الأماكن المفتوحة
2. ✅ الدقة أقل من 50 متر
3. ✅ رسائل الخطأ واضحة بالعربية
4. ✅ يمكن استخدام الخريطة يدوياً كبديل
5. ✅ لا توجد أخطاء في Console

---

## 📞 الإبلاغ عن المشاكل

إذا وجدت مشكلة، أرسل:

1. **لقطة شاشة** من الخطأ
2. **رسالة Console** (F12)
3. **خطوات إعادة المشكلة**
4. **نوع الجهاز والمتصفح**
5. **الموقع** (داخل/خارج المبنى)

---

**آخر تحديث:** 14 أكتوبر 2025  
**الحالة:** ✅ جاهز للاختبار
